__NUXT_JSONP__("/articles/rocm", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J){return {data:[{article:{slug:y,description:"Instructions for setting up ROCm for HIP & OpenCL workloads on AMD GPUs\n",title:"Install ROCm",keywords:["AMD",z,"ROCr","ROCt","ROCk","Radeon Open Compute",A,B],facebookImage:"\u002F_nuxt\u002Fimages\u002Frocm-facebookImage.jpg",twitterImage:"\u002F_nuxt\u002Fimages\u002Frocm-twitterImage.jpg",hidden:false,section:"software",tableOfContents:true,toc:[{id:C,depth:2,text:D},{id:E,depth:w,text:F},{id:G,depth:w,text:H},{id:I,depth:w,text:J}],body:{type:"root",children:[{type:b,tag:g,props:{},children:[{type:a,value:"AMD GPUs use "},{type:b,tag:f,props:{href:"https:\u002F\u002Frocm.docs.amd.com\u002Fprojects\u002FHIP\u002Fen\u002Flatest\u002F",rel:[h,i,j],target:k},children:[{type:a,value:A}]},{type:a,value:" (Heterogeneous-Compute Interface for Portability) and "},{type:b,tag:f,props:{href:"https:\u002F\u002Fwww.khronos.org\u002Fopencl\u002F",rel:[h,i,j],target:k},children:[{type:a,value:B}]},{type:a,value:" (Open Computing Language) to run compute workloads, similar to CUDA on NVIDIA GPUs. In order to use HIP and OpenCL, "},{type:b,tag:f,props:{href:"https:\u002F\u002Fwww.amd.com\u002Fen\u002Fproducts\u002Fsoftware\u002Frocm.html",rel:[h,i,j],target:k},children:[{type:a,value:z}]},{type:a,value:" (the Radeon Open Compute modules) must be installed. The ROCm package interfaces with the AMDGPU driver built into the default Pop!_OS kernel, and does not require installing any DKMS packages."}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"The below instructions correspond with the necessary steps from "},{type:b,tag:f,props:{href:"https:\u002F\u002Frocm.docs.amd.com\u002Fprojects\u002Finstall-on-linux\u002Fen\u002Flatest\u002Fhow-to\u002Fnative-install\u002Fubuntu.html",rel:[h,i,j],target:k},children:[{type:a,value:"AMD's installation documentation for Ubuntu"}]},{type:a,value:"."}]},{type:a,value:c},{type:b,tag:"h2",props:{id:C},children:[{type:b,tag:f,props:{href:"#installation-on-pop_os-2204",ariaHidden:s,tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:D}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"First, add AMD's official ROCm repository to the system and set the appropriate apt pin priority using the below commands:"}]},{type:a,value:c},{type:b,tag:n,props:{className:[o]},children:[{type:b,tag:p,props:{className:[q],style:r},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[l]},children:[{type:b,tag:d,props:{style:m},children:[{type:a,value:"wget https:\u002F\u002Frepo.radeon.com\u002Frocm\u002Frocm.gpg.key -O - | gpg --dearmor | sudo tee \u002Fetc\u002Fapt\u002Fkeyrings\u002Frocm.gpg \u003E \u002Fdev\u002Fnull\necho \"deb [arch=amd64 signed-by=\u002Fetc\u002Fapt\u002Fkeyrings\u002Frocm.gpg] https:\u002F\u002Frepo.radeon.com\u002Frocm\u002Fapt\u002F6.1 jammy main\" | sudo tee --append \u002Fetc\u002Fapt\u002Fsources.list.d\u002Frocm.list\necho -e 'Package: *\\nPin: release o=repo.radeon.com\\nPin-Priority: 600' | sudo tee \u002Fetc\u002Fapt\u002Fpreferences.d\u002Frocm-pin-600\n"}]}]}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Next, update the package lists and install the "},{type:b,tag:e,props:{},children:[{type:a,value:y}]},{type:a,value:" package:"}]},{type:a,value:c},{type:b,tag:n,props:{className:[o]},children:[{type:b,tag:p,props:{className:[q],style:r},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[l]},children:[{type:b,tag:d,props:{style:m},children:[{type:a,value:"sudo apt update\nsudo apt install rocm\n"}]}]}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Finally, add the current user to the "},{type:b,tag:e,props:{},children:[{type:a,value:"render"}]},{type:a,value:" group so the user has permission to run compute workloads:"}]},{type:a,value:c},{type:b,tag:n,props:{className:[o]},children:[{type:b,tag:p,props:{className:[q],style:r},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[l]},children:[{type:b,tag:d,props:{style:m},children:[{type:a,value:"sudo usermod -a -G render $USER\n"}]}]}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"It will be necessary to restart any applications utilizing ROCm before they will detect the GPU(s). If in doubt, reboot the system to ensure the new group membership takes effect."}]},{type:a,value:c},{type:b,tag:x,props:{id:E},children:[{type:b,tag:f,props:{href:"#testing-the-installation",ariaHidden:s,tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:F}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"To check if ROCm is installed, run the "},{type:b,tag:e,props:{},children:[{type:a,value:"rocminfo"}]},{type:a,value:" command. The output should list the ROCm-compatible GPUs (which may also include CPU-integrated graphics) present in the system:"}]},{type:a,value:c},{type:b,tag:n,props:{className:[o]},children:[{type:b,tag:p,props:{className:[q],style:r},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[l]},children:[{type:b,tag:d,props:{style:m},children:[{type:a,value:"system76@pop-os:~$ rocminfo\nROCk module is loaded\n...        \n==========\nHSA Agents               \n==========               \n*******                  \nAgent 1                  \n*******                  \n  Name:                    AMD Ryzen 7 6800U with Radeon Graphics\n  Uuid:                    CPU-XX                             \n  Marketing Name:          AMD Ryzen 7 6800U with Radeon Graphics\n  Vendor Name:             CPU                                \n...\n  Device Type:             CPU                                \n...              \n*******\nAgent 2                  \n*******                  \n  Name:                    gfx1035                            \n  Uuid:                    GPU-XX                             \n  Marketing Name:          AMD Radeon Graphics                \n  Vendor Name:             AMD                                \n...\n  Device Type:             GPU                                \n...                        \n*** Done ***             \nsystem76@pop-os:~$ \n"}]}]}]}]}]},{type:a,value:c},{type:b,tag:x,props:{id:G},children:[{type:b,tag:f,props:{href:"#using-docker",ariaHidden:s,tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Instructions from AMD for building and running a Docker image with Pytorch and ROCm are "},{type:b,tag:f,props:{href:"https:\u002F\u002Frocm.docs.amd.com\u002Fprojects\u002Finstall-on-linux\u002Fen\u002Flatest\u002Fhow-to\u002F3rd-party\u002Fpytorch-install.html#using-docker-with-pytorch-pre-installed",rel:[h,i,j],target:k},children:[{type:a,value:"here"}]},{type:a,value:". Note that you will likely have to run the Docker commands as sudo (i.e. "},{type:b,tag:e,props:{},children:[{type:a,value:"sudo docker run -it ..."}]},{type:a,value:") for typical Docker setups."}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Also note that Docker Desktop runs in a virtual environment, so it's recommended to use Docker Engine instead to avoid permission issues. Instructions on installing the latest version of Docker Engine are "},{type:b,tag:f,props:{href:"https:\u002F\u002Fdocs.docker.com\u002Fengine\u002Finstall\u002Fubuntu\u002F",rel:[h,i,j],target:k},children:[{type:a,value:"on Docker's website"}]},{type:a,value:". You can alternatively install Docker Engine via the "},{type:b,tag:e,props:{},children:[{type:a,value:"docker.io"}]},{type:a,value:" package, which is maintained by Ubuntu (and may not be up-to-date):"}]},{type:a,value:c},{type:b,tag:n,props:{className:[o]},children:[{type:b,tag:p,props:{className:[q],style:r},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[l]},children:[{type:b,tag:d,props:{style:m},children:[{type:a,value:"sudo apt install docker.io"}]}]},{type:a,value:c},{type:b,tag:d,props:{className:[l]},children:[{type:b,tag:d,props:{style:m},children:[{type:a,value:"sudo usermod -aG docker "}]},{type:b,tag:d,props:{style:"color: var(--code-0A)"},children:[{type:a,value:"$"}]},{type:b,tag:d,props:{style:"color: var(--code-0C)"},children:[{type:a,value:"USER"}]}]},{type:a,value:c},{type:b,tag:d,props:{className:[l]},children:[]}]}]}]},{type:a,value:c},{type:b,tag:x,props:{id:I},children:[{type:b,tag:f,props:{href:"#blender-compatibility",ariaHidden:s,tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"The default Blender "},{type:b,tag:e,props:{},children:[{type:a,value:".deb"}]},{type:a,value:" package in Pop!_OS 22.04, which is provided by Ubuntu, does not support HIP workloads. The Blender flatpak package may be unable to properly detect the GPU(s) due to sandboxing restrictions. Therefore, for GPU rendering with HIP in Blender, it's recommended to "},{type:b,tag:f,props:{href:"https:\u002F\u002Fwww.blender.org\u002F",rel:[h,i,j],target:k},children:[{type:a,value:"download Blender directly from blender.org"}]},{type:a,value:". (After extracting the "},{type:b,tag:e,props:{},children:[{type:a,value:".tar.xz"}]},{type:a,value:" file, simply double-click the "},{type:b,tag:e,props:{},children:[{type:a,value:"blender"}]},{type:a,value:" executable to run the program.)"}]}]},dir:"\u002F",path:"\u002Frocm",extension:".md",createdAt:"2024-05-08T21:39:04.000Z",updatedAt:"2024-08-06T16:43:10.000Z",authors:[{username:"jessecambon",commitUrl:"https:\u002F\u002Fgithub.com\u002Fsystem76\u002Fdocs\u002Fcommit\u002Fd89383fcc97426bbd72cfc72ca7d568ea610a09c",avatarUrl:"https:\u002F\u002Favatars.githubusercontent.com\u002Fu\u002F31526206?v=4",profileUrl:"https:\u002F\u002Fgithub.com\u002Fjessecambon"},{username:"jacobgkau",commitUrl:"https:\u002F\u002Fgithub.com\u002Fsystem76\u002Fdocs\u002Fcommit\u002Fd4cccbcd7e6b24019e534188f8b268ee7c71bea0",avatarUrl:"https:\u002F\u002Favatars.githubusercontent.com\u002Fu\u002F7199422?v=4",profileUrl:"https:\u002F\u002Fgithub.com\u002Fjacobgkau"}]},_img:{}}],fetch:{},mutations:void 0}}("text","element","\n","span","code","a","p","nofollow","noopener","noreferrer","_blank","line","color: var(--code-0F)","div","nuxt-content-highlight","pre","shiki","background-color: var(--code-00)","true",-1,"icon","icon-link",3,"h3","rocm","ROCm","HIP","OpenCL","installation-on-pop_os-2204","Installation on Pop!_OS 22.04","testing-the-installation","Testing the Installation","using-docker","Using Docker","blender-compatibility","Blender Compatibility")));